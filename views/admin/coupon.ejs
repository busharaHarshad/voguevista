<%- include('../layout/adminheader.ejs') %>
<div class="main-content">
    <!---sidebar-->
  <div class="sidebar">
      <div class="sidebar-buttons">
        <a href="/admin/home"><button type="button" class="buttonside btn-block"><i class="fa-solid fa-chess-board"></i>  Dashboard</button></a>
        <a href="/admin/customer"><button type="button" class="buttonside btn-block"><i class="fa-solid fa-users"></i>   Customers</button></a>
        <a href="/admin/product"><button type="button" class="buttonside btn-block"><i class="fa-solid fa-briefcase"></i>   Products</button></a>
        <a href="/admin/order"><button type="button" class="buttonside btn-block"><i class="fa-solid fa-file"></i>   Orders</button></a>
        <a href=""><button type="button" class="buttonside btn-block"><i class="fa-regular fa-image"></i>  Banner Management</button></a>
        <a href="/admin/coupon"><button type="button" class="buttonside btn-block active-linking text-white"><i class="fa-solid fa-star"></i>       Coupon Management</button></a>
        <a href="/admin/salereport"><button type="button" class="buttonside btn-block"><i class="fa-solid fa-chart-simple"></i>  Sales Report</button></a>
        <a href="/admin/offer"><button type="button" class="buttonside btn-block"><i class="fa-solid fa-user-tie"></i>        Offer</button></a>
        <a href="/admin/category"><button type="button" class="buttonside btn-block"><i class="fa-solid fa-list"></i>        Category</button></a>
        <a href=""><button type="button" class="buttonside  btn-block"><i class="fa-solid fa-gear"></i>   Settings</button>
        <a href="/admin/logout"><button type="button" class="buttonside  btn-block"><i class="fa-solid fa-right-from-bracket"></i>   Logout</button></a>
      
        </div>
    </div>
    
  
    <div class=" container-table mt-5">
        <a href="/admin/couponadd"><button type="button" class="btn addbutton mt-2">Add New Coupon</button></a>
<br>
<br>
        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Coupon Code</th>
                        <th>Coupon Name</th>
                        <th>Discount (%)</th>
                        <th>Min Purchase</th>
                        <th>Expiry Date</th>
                        <th>Usage Limit</th>
                        <th>Active</th>
                        <th>Action</th> <!-- New column for action buttons -->
                    </tr>
                </thead>
                <tbody>
                    <% coupons.forEach(coupon => { %>
                        <tr>
                            <td><%= coupon.couponCode %></td>
                            <td><%= coupon.couponName %></td>
                            <td><%= coupon.discount %></td>
                            <td><%= coupon.minPurchase %></td>
                            <td><%= coupon.Expiry.toDateString() %></td>
                            <td><%= coupon.usageLimit %></td>
                            <td><%= coupon.active ? 'Yes' : 'No' %></td>
                            <td>
                                <a href="/admin/editcoupon?id=<%= coupon._id %>"><i class="fa-solid fa-pen text-dark"></i></a>
                                <form action="/admin/coupon/<%= coupon._id %>/toggle" method="POST" style="display: inline;">
                                    <button type="submit" class="list-btn">
                                        <% if (coupon.active) { %>
                                            Unlist
                                        <% } else { %>
                                            List
                                        <% } %>
                                    </button>
                                </form>
                                 <a href="/admin/deletecoupon?id=<%= coupon._id %>"><i class="fa-solid fa-trash text-dark p-2"></i></a>
                              
                            </td>
                            
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        </div>
    </div>
</div>

<%- include('../layout/adminfooter.ejs') %>